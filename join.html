<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <link rel="icon" type="image/png" href="favicon.png" />
    <title>GenThresh</title>
    <meta name="description" content="Generate Threshold Signatures">
    <meta name="Kee Jefferys" content="SitePoint">

</head>

<body>

    <div class="titlebox">
        <div class="title">
            Group Sign
        </div>
        <div class="emojititle">
            <a class="emojilink" href="Genthresh.html">üßô</a>
        </div>
    </div>

    <div class="buttonbox" id="groupinfobox">

        <div class="keys" id="ThresholdDisplay"></div>
        <div id="buttonSavegroup">
            <button onclick="groupInfo()" class="emojibutton">&nbsp;üíæ Save Group Info</button>
        </div>

    </div>

    <div class="namecontainer" id="nameContainer">

        <input class="namebox" id="nameEntry" type="text" placeholder="Enter name here" /> <button class="copyButton"
            id="enterName" onclick="getName()">‚úîÔ∏è</button>

    </div>

    <div class="roomcontainer" id="roomcontainer">
        <input class="roombox" id="roombox" type="text" readonly /> <button class="copyButton"
            onclick="copyClipboard()">üìã</button>
    </div>

    <div class="keycontainer">

        <div class="keys" id="pubKeyText">
        </div>
        <div class="keysdisplay" id="pubKeyDisplay">

        </div>
    </div>

    <div class="GenerateFramework" id="GenerateFramework">

        <div class="buttonbox" id="generateOrLoad">

            <div id="button1">
                <button onclick="generateNewKeypair()" class="emojibutton">&nbsp;üîë Generate Keypair</button>
            </div>
            <div id="button1">
                <button onclick="getKeys()" class="emojibutton">&nbsp;‚¨ÜÔ∏èüíæImport Keypair</button>
            </div>

        </div>


        <div class="keycontainer" id="GeneratedKeyBox">

            <div class="keys" id="pubKeyText">
                Your keys <button class="copyButton" onclick="copyClipboard()">üìã</button>
            </div>
            <div class="keysdisplay" id="pubKeyDisplayPublic"></div>
        </div>

        <div class="buttonbox" id="buttonboxthreshold">

            <div id="button1">
                <button onclick="nameChoose()" class="emojibutton">&nbsp;‚û°Ô∏è Next</button>
            </div>

        </div>

    </div>

    <div class="keys" id="wait"></div>
    <div id="readybutton"><button class="copyButton" id="enterName" onclick="readyUp(chosenRoom)">Are you
            Ready?‚úîÔ∏è</button>
    </div>

    <div class="keycontainer" id="ProposedMessageDisplay">

        <div class="keys" id="pubKeyText">
            Proposed Message
        </div>
        <div class="keysdisplay" id="proposedMessageBox"></div>
    </div>

    <div class="buttonbox" id="signOrNot">

        <div id="button1">
            <button onclick="sendMessage()" class="emojibutton">&nbsp;‚úîÔ∏è Sign</button>
        </div>

        <div id="button1">
            <button onclick="reject()" class="emojibutton">&nbsp;‚ùå Reject</button>
        </div>
    </div>

    <div id="myProgress">
        <div id="currentSigned"></div>
        <div id="thresholdBar"></div>
    </div>

    <div class="Legend" id="Legend">

        <div class="colour darkpurp"></div>Already Signed
        <div class="colour lightpurp"></div>Threshold
        <div class="colour yellow"></div>Maximum

    </div>

    <div id="roomIsFull" class="keys">Room is full please contact the operator</div>

    <div class="keysdisplay" id="aggSigAggKeyDisplay"></div>

    <div class="buttonbox" id="buttonboxpadding">

        <div id="button1">
            <button onclick="downloadsigs()" class="emojibutton" id ="SaveSignatureInfo">&nbsp;üíæ Save Signature info</button>
        </div>

    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
    <script src="bundle.js"></script>

    <script>

        chosenRoom = window.location.href
        chosenRoom = chosenRoom.split('?')[1]

        privKey = ''
        pubKey = ''
        firstJoin = true
        signerCount = 0
        threshold = ''
        frozenUserList = []
        signers = ''
        steps = ''
        thresholdSet = ''
        signatureArray = []

        var socket = io.connect("http://localhost:8000");
        checkroomfull()

        function startSocket() {
            socket.emit('create', chosenRoom);
        }

        function setUsername(name, roomid) {
            socket.emit('setUsername', { namewanted: name, roomname: roomid, socketid: socket.id, isLeader: false, publicKey: pubKey });
        };

        function checkroomfull() {
            socket.emit('checkRoom', { roomid: chosenRoom })
        }

        function nameChoose() {
            document.getElementById("GenerateFramework").style.display = 'none'
            document.getElementById("nameContainer").style.display = 'block'
        }

        function aggregateKeys(keyArray) {
            singleKey = myBundle.aggKey(keyArray)
            return singleKey
        }


        function aggregateSignature(signatureArray) {
            agg = myBundle.aggSig(signatureArray)
            return agg
        }

        function getUsers() {
            socket.emit('getUsers', { roomid: chosenRoom });
            document.getElementById("readybutton").style.display = 'block'
            document.getElementById("GenerateFramework").style.display = 'none'
        };

        socket.on('roomFullEvent', function (data) {
            if (data == true) {
                roomIsFull()
            }
        });

        socket.on('getUsers', function (data) {
            userList = data.userlist
            readyUsers = 0

            document.getElementById("pubKeyDisplay").style.display = "block"
            document.getElementById("pubKeyDisplay").innerHTML = ""


            for (let index = 0; index < userList.length; index++) {

                name = userList[index].name;
                socketchoice = userList[index].socketid
                document.getElementById("pubKeyDisplay").innerHTML += "<div id=" + socketchoice + "" + " class=\"joinedNames\">" + name + "</div>"
                if (userList[index].readyStatus == true) {
                    document.getElementById(socketchoice).innerText += "‚úîÔ∏è"
                    readyUsers++
                }
                if (userList[index].isLeader == true) {
                    signers = userList[index].signers
                    threshold = userList[index].threshold

                    steps = 100 / signers
                    thresholdSet = threshold * steps

                    document.getElementById("ThresholdDisplay").innerHTML = "Signers: " + signers + " Threshold: " + threshold

                }

                if (readyUsers == signers && frozenUserList.length == 0) {
                    //Freeze getinfo Array when everyone is joined
                    frozenUserList = userList
                }

            }

            if (readyUsers == signers) {

                document.getElementById("groupinfobox").style.display = "block"
            }
        })


        function readyUp(roomid) {
            document.getElementById("readybutton").style.display = "none"
            socket.emit('readyUp', { roomname: roomid, socketid: socket.id });
        };

        function roomIsFull() {
            document.getElementById("roomIsFull").style.display = "block"
            document.getElementById("generateOrLoad").style.display = "none"

        }

        function reject() {
            document.getElementById("signOrNot").style.display = "none"
        }

        async function sendMessage() {
            var message = document.getElementById('proposedMessageBox').innerText;
            signature = await myBundle.signMessage(privKey, message)
            signature = bufferToHex(signature)

            for (let index = 0; index < frozenUserList.length; index++) {
                element = frozenUserList[index];

                if (element.publicKey == pubKey) {
                    arrayPosition = index
                    break
                }

            }

            if (message) {
                document.getElementById("signOrNot").style.display = "none"
                socket.emit('msg', { message: message, signature: signature, roomid: chosenRoom, publicKey: pubKey, leaderstatus: false, arrayPosition: arrayPosition });
            }
        }
        socket.on('newmsg', async function (data) {

            if (data.leaderstatus == true) {
                document.getElementById("proposedMessageBox").innerText = data.msg
                document.getElementById("ProposedMessageDisplay").style.display = "block"
                document.getElementById("myProgress").style.display = "block"
                document.getElementById("Legend").style.display = "flex"
                document.getElementById("signOrNot").style.display = "block"
            }

            signatureArray.push({ message: data.msg, signature: data.signature, publicKey: data.publicKey, arrayPosition: data.arrayPosition })

            signerCount++
            document.getElementById("currentSigned").style.width = signerCount * steps + "%"
            document.getElementById("thresholdBar").style.width = thresholdSet + "%"

            if (signerCount >= threshold) {

                document.getElementById("SaveSignatureInfo").style.display = 'flex'

                if (signerCount == signers) {
                document.getElementById("ProposedMessageDisplay").style.display = 'none'
                document.getElementById("myProgress").style.display = 'none'
                document.getElementById("Legend").style.display = 'none'
                }

                aggregateKeyArray = []
                aggregateSignatureArray = []
                signerIndex = []
                for (let index = 0; index < signatureArray.length; index++) {
                    signerIndex.push(signatureArray[index].arrayPosition)
                    aggregateKeyArray.push(signatureArray[index].publicKey);
                    aggregateSignatureArray.push(signatureArray[index].signature);
                }

                finalAggKeys = await aggregateKeys(aggregateKeyArray)
                finalAggKeys = bufferToHex(finalAggKeys)
                finalAggSig = await aggregateSignature(aggregateSignatureArray)
                finalAggSig = bufferToHex(finalAggSig)

                document.getElementById("aggSigAggKeyDisplay").style.display = "block"
                document.getElementById("aggSigAggKeyDisplay").innerHTML = '<div>Aggregate Key:</div>' + finalAggKeys + '\n';
                document.getElementById("aggSigAggKeyDisplay").innerHTML += '<div class ="publickey">Aggregate Signature:</div>' + finalAggSig
                document.getElementById("aggSigAggKeyDisplay").innerHTML += '<div class ="publickey">Signer Indexes:</div>' + signerIndex

            }
        })

        function getName() {
            yourName = randomEmoji() + " " + document.getElementById("nameEntry").value;
            startSocket()
            setUsername(yourName, chosenRoom)
            document.getElementById("nameContainer").remove()
            getUsers()

        }

        function GenerateOrLoad() {
            document.getElementById("generateOrLoad").style.display = "block"
        }

        function generateNewKeypair() {
            var array = new Uint8Array(64);
            privKey = bufferToHex(window.crypto.getRandomValues(array)) // This needs to be review for security
            pubKey = bufferToHex(myBundle.generatePubKey(privKey)); // calling code from the bundle
            document.getElementById("GeneratedKeyBox").style.display = "block"
            document.getElementById("pubKeyDisplayPublic").innerHTML = '<div>Public Key:</div>' + pubKey + '\n';
            document.getElementById("pubKeyDisplayPublic").innerHTML += '<div class ="publickey">Private Key:</div>' + privKey
            document.getElementById("buttonboxthreshold").style.display = "block"

        }

        async function groupInfo() {
            keyArray = []
            proposedDownloadText = "Number of Signers: " + signers + "\n"
            proposedDownloadText += "Threshold Required: " + threshold + "\n"

            for (let index = 0; index < frozenUserList.length; index++) {
                const element = frozenUserList[index];
                keyArray.push(element.publicKey)
                proposedDownloadText += "Key " + index + " :" + element.publicKey + "\n"

            }
            aggkey = await aggregateKeys(keyArray) // deal with the promise, might be because i fucked with the function
            aggkey = bufferToHex(aggkey)
            proposedDownloadText += "Aggregate Key: " + aggkey + "\n"

            let today = new Date().toISOString().slice(0, 10)
            filename = 'GroupInfoBLS' + today + '.txt'
            downloadtext(proposedDownloadText,filename)


        }

        function downloadsigs(){
            proposedText = document.getElementById("aggSigAggKeyDisplay").innerText
            let today = new Date().toISOString().slice(0, 10)
            proposedFileName = 'SignatureInfoBLS' + today + '.txt'
            downloadtext(proposedText,proposedFileName)
        }


        function downloadtext(proposedMessage, proposedFilename){

            var hiddenElement = document.createElement('a');
            hiddenElement.href = 'data:attachment/text,' + encodeURI(proposedMessage);
            hiddenElement.target = '_blank';
            let today = new Date().toISOString().slice(0, 10)
            hiddenElement.download = proposedFilename;
            hiddenElement.click();

        }


        function bufferToHex(buffer) {
            return [...new Uint8Array(buffer)]
                .map(b => b.toString(16).padStart(2, "0"))
                .join("");
        }

        function getKeys() {
            var input = document.createElement('input');
            input.type = 'file';

            input.onchange = e => {
                var filetest = e.target.files[0];
                console.log(filetest.name)

                // setting up the reader
                var reader = new FileReader();
                reader.readAsText(filetest, 'UTF-8');

                // here we tell the reader what to do when it's done reading...
                reader.onload = readerEvent => {
                    var content = readerEvent.target.result; // this is the content!

                    keys = content.split('\n')
                    publicKey = keys[0].split(':')
                    privateKey = keys[1].split(':')
                    pubKey = publicKey[1]
                    privKey = privateKey[1]


                    document.getElementById("GeneratedKeyBox").style.display = "block"
                    document.getElementById("pubKeyDisplayPublic").innerHTML = '<div>Public Key:</div>' + pubKey + '\n';
                    document.getElementById("pubKeyDisplayPublic").innerHTML += '<div class ="publickey">Private Key:</div>' + privKey
                    document.getElementById("buttonboxthreshold").style.display = "block"

                }



            }

            input.click();
        }

        function copyClipboard() {
            var copyText = document.getElementById("roombox");
            navigator.clipboard.writeText(copyText.value)
        }

        function randomEmoji() {

            allowedEmojis = ['üòÑ', 'üòÉ', 'üòÄ', 'üòä', 'üòâ', 'üòç', 'üòò', 'üòö', 'üòó', 'üòô', 'üòú', 'üòù', 'üòõ', 'üò≥', 'üòÅ', 'üòî', 'üòå', 'üòí', 'üòû', 'üò£', 'üò¢', 'üòÇ', 'üò≠', 'üò™', 'üò•', 'üò∞', 'üòÖ', 'üòì', 'üò©', 'üò´', 'üò®', 'üò±', 'üò†', 'üò°', 'üò§', 'üòñ', 'üòÜ', 'üòã', 'üò∑', 'üòé', 'üò¥', 'üòµ', 'üò≤', 'üòü', 'üò¶', 'üòß', 'üòà', 'üëø', 'üòÆ', 'üò¨', 'üòê', 'üòï', 'üòØ', 'üò∂', 'üòá', 'üòè', 'üòë', 'üë≤', 'üë≥', 'üëÆ', 'üë∑', 'üíÇ', 'üë∂', 'üë¶', 'üëß', 'üë®', 'üë©', 'üë¥', 'üëµ', 'üë±', 'üëº', 'üë∏', 'üò∫', 'üò∏', 'üòª', 'üòΩ', 'üòº', 'üôÄ', 'üòø', 'üòπ', 'üòæ', 'üëπ', 'üë∫', 'üôà', 'üôâ', 'üôä', 'üíÄ', 'üëΩ', 'üí©', 'üî•', '‚ú®', 'üåü', 'üí´', 'üí•', 'üí¢', 'üí¶', 'üíß', 'üí§', 'üí®', 'üëÇ', 'üëÄ', 'üëÉ', 'üëÖ', 'üëÑ', 'üëç', 'üëé', 'üëå', 'üëä', '‚úä', '‚úå', 'üëã', '‚úã', 'üëê', 'üëÜ', 'üëá', 'üëâ', 'üëà', 'üôå', 'üôè', '‚òù', 'üëè', 'üí™', 'üö∂', 'üèÉ', 'üíÉ', 'üë´', 'üë™', 'üë¨', 'üë≠', 'üíè', 'üíë', 'üëØ', 'üôÜ', 'üôÖ', 'üíÅ', 'üôã', 'üíÜ', 'üíá', 'üíÖ', 'üë∞', 'üôé', 'üôç', 'üôá', 'üé©', 'üëë', 'üëí', 'üëü', 'üëû', 'üë°', 'üë†', 'üë¢', 'üëï', 'üëî', 'üëö', 'üëó', 'üéΩ', 'üëñ', 'üëò', 'üëô', 'üíº', 'üëú', 'üëù', 'üëõ', 'üëì', 'üéÄ', 'üåÇ', 'üíÑ', 'üíõ', 'üíô', 'üíú', 'üíö', '‚ù§', 'üíî', 'üíó', 'üíì', 'üíï', 'üíñ', 'üíû', 'üíò', 'üíå', 'üíã', 'üíç', 'üíé', 'üë§', 'üë•', 'üí¨', 'üë£', 'üí≠', 'üê∂', 'üê∫', 'üê±', 'üê≠', 'üêπ', 'üê∞', 'üê∏', 'üêØ', 'üê®', 'üêª', 'üê∑', 'üêΩ', 'üêÆ', 'üêó', 'üêµ', 'üêí', 'üê¥', 'üêë', 'üêò', 'üêº', 'üêß', 'üê¶', 'üê§', 'üê•', 'üê£', 'üêî', 'üêç', 'üê¢', 'üêõ', 'üêù', 'üêú', 'üêû', 'üêå', 'üêô', 'üêö', 'üê†', 'üêü', 'üê¨', 'üê≥', 'üêã', 'üêÑ', 'üêè', 'üêÄ', 'üêÉ', 'üêÖ', 'üêá', 'üêâ', 'üêé', 'üêê', 'üêì', 'üêï', 'üêñ', 'üêÅ', 'üêÇ', 'üê≤', 'üê°', 'üêä', 'üê´', 'üê™', 'üêÜ', 'üêà', 'üê©', 'üêæ', 'üíê', 'üå∏', 'üå∑', 'üçÄ', 'üåπ', 'üåª', 'üå∫', 'üçÅ', 'üçÉ', 'üçÇ', 'üåø', 'üåæ', 'üçÑ', 'üåµ', 'üå¥', 'üå≤', 'üå≥', 'üå∞', 'üå±', 'üåº', 'üåê', 'üåû', 'üåù', 'üåö', 'üåë', 'üåí', 'üåì', 'üåî', 'üåï', 'üåñ', 'üåó', 'üåò', 'üåú', 'üåõ', 'üåô', 'üåç', 'üåé', 'üåè', 'üåã', 'üåå', 'üå†', '‚≠ê', '‚òÄ', '‚õÖ', '‚òÅ', '‚ö°', '‚òî', '‚ùÑ', '‚õÑ', 'üåÄ', 'üåÅ', 'üåà', 'üåä', 'üéç', 'üíù', 'üéé', 'üéí', 'üéì', 'üéè', 'üéÜ', 'üéá', 'üéê', 'üéë', 'üéÉ', 'üëª', 'üéÖ', 'üéÑ', 'üéÅ', 'üéã', 'üéâ', 'üéä', 'üéà', 'üéå', 'üîÆ', 'üé•', 'üì∑', 'üìπ', 'üìº', 'üíø', 'üìÄ', 'üíΩ', 'üíæ', 'üíª', 'üì±', '‚òé', 'üìû', 'üìü', 'üì†', 'üì°', 'üì∫', 'üìª', 'üîä', 'üîâ', 'üîà', 'üîá', 'üîî', 'üîï', 'üì¢', 'üì£', '‚è≥', '‚åõ', '‚è∞', '‚åö', 'üîì', 'üîí', 'üîè', 'üîê', 'üîë', 'üîé', 'üí°', 'üî¶', 'üîÜ', 'üîÖ', 'üîå', 'üîã', 'üîç', 'üõÅ', 'üõÄ', 'üöø', 'üöΩ', 'üîß', 'üî©', 'üî®', 'üö™', 'üö¨', 'üí£', 'üî´', 'üî™', 'üíä', 'üíâ', 'üí∞', 'üí¥', 'üíµ', 'üí∑', 'üí∂', 'üí≥', 'üí∏', 'üì≤', 'üìß', 'üì•', 'üì§', '‚úâ', 'üì©', 'üì®', 'üìØ', 'üì´', 'üì™', 'üì¨', 'üì≠', 'üìÆ', 'üì¶', 'üìù', 'üìÑ', 'üìÉ', 'üìë', 'üìä', 'üìà', 'üìâ', 'üìú', 'üìã', 'üìÖ', 'üìÜ', 'üìá', 'üìÅ', 'üìÇ', '‚úÇ', 'üìå', 'üìé', '‚úí', '‚úè', 'üìè', 'üìê', 'üìï', 'üìó', 'üìò', 'üìô', 'üìì', 'üìî', 'üìí', 'üìö', 'üìñ', 'üîñ', 'üìõ', 'üî¨', 'üî≠', 'üì∞', 'üé®', 'üé¨', 'üé§', 'üéß', 'üéº', 'üéµ', 'üé∂', 'üéπ', 'üéª', 'üé∫', 'üé∑', 'üé∏', 'üëæ', 'üéÆ', 'üÉè', 'üé¥', 'üÄÑ', 'üé≤', 'üéØ', 'üèà', 'üèÄ', '‚öΩ', '‚öæ', 'üéæ', 'üé±', 'üèâ', 'üé≥', '‚õ≥', 'üöµ', 'üö¥', 'üèÅ', 'üèá', 'üèÜ', 'üéø', 'üèÇ', 'üèä', 'üèÑ', 'üé£', '‚òï', 'üçµ', 'üç∂', 'üçº', 'üç∫', 'üçª', 'üç∏', 'üçπ', 'üç∑', 'üç¥', 'üçï', 'üçî', 'üçü', 'üçó', 'üçñ', 'üçù', 'üçõ', 'üç§', 'üç±', 'üç£', 'üç•', 'üçô', 'üçò', 'üçö', 'üçú', 'üç≤', 'üç¢', 'üç°', 'üç≥', 'üçû', 'üç©', 'üçÆ', 'üç¶', 'üç®', 'üçß', 'üéÇ', 'üç∞', 'üç™', 'üç´', 'üç¨', 'üç≠', 'üçØ', 'üçé', 'üçè', 'üçä', 'üçã', 'üçí', 'üçá', 'üçâ', 'üçì', 'üçë', 'üçà', 'üçå', 'üçê', 'üçç', 'üç†', 'üçÜ', 'üçÖ', 'üåΩ', 'üè†', 'üè°', 'üè´', 'üè¢', 'üè£', 'üè•', 'üè¶', 'üè™', 'üè©', 'üè®', 'üíí', '‚õ™', 'üè¨', 'üè§', 'üåá', 'üåÜ', 'üèØ', 'üè∞', '‚õ∫', 'üè≠', 'üóº', 'üóæ', 'üóª', 'üåÑ', 'üåÖ', 'üåÉ', 'üóΩ', 'üåâ', 'üé†', 'üé°', '‚õ≤', 'üé¢', 'üö¢', '‚õµ', 'üö§', 'üö£', '‚öì', 'üöÄ', '‚úà', 'üí∫', 'üöÅ', 'üöÇ', 'üöä', 'üöâ', 'üöû', 'üöÜ', 'üöÑ', 'üöÖ', 'üöà', 'üöá', 'üöù', 'üöã', 'üöÉ', 'üöé', 'üöå', 'üöç', 'üöô', 'üöò', 'üöó', 'üöï', 'üöñ', 'üöõ', 'üöö', 'üö®', 'üöì', 'üöî', 'üöí', 'üöë', 'üöê', 'üö≤', 'üö°', 'üöü', 'üö†', 'üöú', 'üíà', 'üöè', 'üé´', 'üö¶', 'üö•', '‚ö†', 'üöß', 'üî∞', '‚õΩ', 'üèÆ']
            emojis = [Math.floor(Math.random() * allowedEmojis.length)];
            emoji = allowedEmojis[emojis[0]]
            return emoji
        }

        var input = document.getElementById("nameEntry");
        input.addEventListener("keyup", function (event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                document.getElementById("enterName").click();
            }
        });
    </script>
</body>

</html>

<style>
    /* Add a black background color to the top navigation bar */
    .emojititle {
        font-size: 10vw;
    }

    .title {
        font-size: 5vw;
        font-family: Arial, Helvetica, sans-serif;
        font-weight: bold;
    }

    #button1,
    #button2 {
        display: inline-block;
    }

    #buttonSavegroup {
        display: inline-block;
        margin-left: 40px;
    }

    #pubKeyDisplay,
    #GeneratedKeyBox,
    #buttonboxthreshold,
    #nameContainer,
    #groupinfobox,
    #ProposedMessageDisplay,
    #signOrNot,
    #myProgress,
    #Legend,
    #roomIsFull, #aggSigAggKeyDisplay, #SaveSignatureInfo {
        display: none;
    }

    #readybutton {
        display: none;
        text-align: center;
    }

    #myProgress {
        position: relative;
        width: 100%;
        background-color: #fadb8d;

    }

    #currentSigned {
        position: absolute;
        width: 0%;
        height: 50px;
        background-color: #ce6df8;
    }

    #thresholdBar {

        width: 0%;
        height: 50px;
        background-color: #e0acf7;
    }


    .buttonbox {
        text-align: center;
        padding-bottom: 20px;
    }

    .titlebox {
        text-align: center;
        padding-bottom: 10px;
    }

    .namebox {

        border: 0;
        outline: 0;
        font-size: 25px;
        text-align: center;
        background: transparent;
        border-bottom: 2px solid rgb(253, 232, 191);
        width: 30%;
    }

    .roombox {

        border: 0;
        outline: 0;
        font-size: 40px;
        text-align: center;
        background: transparent;
        color: grey;
        border-bottom: 2px solid rgb(253, 232, 191);
        min-width: 30%;
        width: auto;
    }

    .keys {
        text-align: center;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 30px;
        margin-bottom: 10px;
    }

    .keysdisplay {
        text-align: center;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 25px;
        overflow: hidden;
        word-wrap: break-word;
        border-radius: 25px;
        border: 2px solid #8d7745;
        padding: 20px;

    }

    .keycontainer {
        padding-bottom: 30px;
    }

    body {
        background-color: #fef2dc;
        margin-left: 15%;
        margin-right: 15%;

    }

    #ThresholdDisplay {
        display: inline;
    }

    .copyButton {
        border: none;
        outline: none;
        background-color: #fef2dc;
        font-size: 35px;
    }

    .copyButton:active {
        transform: translateY(4px);
    }

    .namecontainer {
        text-align: center;
        padding-bottom: 20px;
    }

    .roomcontainer {
        display: none;
        text-align: center;
        padding-bottom: 20px;
    }

    body {
        background-color: rgb(254, 242, 220);
    }

    .emojibutton {
        font-size: 25px;
        font-family: 'Poppins', sans-serif;
        font-weight: 600;
        color: #fff;
        border: 0;
        outline: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        height: 2.5em;
        padding: 0.5em 0.75em;
        border-radius: 0.25em;
        box-sizing: border-box;
        background-color: #e0acf7;
        box-shadow: 0 0.15em 1em rgba(0, 0, 0, 0.2);
        z-index: 1;
        transition-duration: 0.4s;
        cursor: pointer;
    }

    .colour {
        width: 50px;
        height: 50px;
        margin: 5px;
    }

    .darkpurp {
        background: #ce6df8;
    }

    .lightpurp {
        background: #e0acf7;
    }

    .yellow {
        background: #fadb8d;
    }

    .Legend {
        font-family: Arial, Helvetica, sans-serif;
        font-size: 20px;
        padding-bottom: 20px;
        height: 50px;
        padding-top: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    #buttonboxpadding{
        padding-top: 20px;
    }

    .emojibutton:hover {
        background-color: #cc70f3;
        color: white;
    }

    .joinedNames {
        font-size: 25px;
        font-family: 'Poppins', sans-serif;
        font-weight: 600;
        color: #fff;
        border: 0;
        outline: 0;
        float: left;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        height: 2.5em;
        padding: 0.5em 0.75em;
        border-radius: 0.25em;
        box-sizing: border-box;
        background-color: #16C60C;
        box-shadow: 0 0.15em 1em rgba(0, 0, 0, 0.2);
        z-index: 1;
        transition-duration: 0.4s;
        cursor: pointer;
    }

    .joinedNames:hover {
        background-color: #12970b;
        color: white;
    }

    .emojilink {
        text-decoration: none;
    }
</style>